<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commercial Auto Insurance Quote - Vanguard Insurance Group</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/quote.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .quote-header {
            background: linear-gradient(135deg, #1a3a52 0%, #2c5282 100%);
            color: white;
            padding: 40px 0 30px;
            text-align: center;
        }

        .quote-header h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .quote-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin: 0;
        }

        /* Progress Tracker */
        .progress-container {
            max-width: 1000px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .progress-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 40px;
        }

        .progress-steps::before {
            content: '';
            position: absolute;
            top: 25px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 0;
        }

        .progress-bar {
            position: absolute;
            top: 25px;
            left: 0;
            height: 3px;
            background: linear-gradient(135deg, #1a3a52 0%, #2c5282 100%);
            z-index: 1;
            transition: width 0.3s ease;
        }

        .progress-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }

        .step-circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: white;
            border: 3px solid #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: 600;
            color: #999;
            transition: all 0.3s ease;
        }

        .progress-step.active .step-circle {
            border-color: #2c5282;
            background: #2c5282;
            color: white;
            transform: scale(1.1);
        }

        .progress-step.completed .step-circle {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }

        .step-label {
            font-size: 0.85rem;
            color: #666;
            font-weight: 500;
        }

        .progress-step.active .step-label {
            color: #2c5282;
            font-weight: 600;
        }

        .form-container {
            max-width: 900px;
            margin: 0 auto 40px;
            padding: 0 20px;
        }

        .form-card {
            background: white;
            border-radius: 12px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            display: none;
        }

        .form-card.active {
            display: block;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .section-title i {
            background: linear-gradient(135deg, #1a3a52 0%, #2c5282 100%);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .section-title h2 {
            color: #333;
            font-size: 1.5rem;
            margin: 0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-group label .required {
            color: #dc3545;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #2c5282;
            box-shadow: 0 0 0 3px rgba(44, 82, 130, 0.1);
        }

        .help-text {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
        }

        .radio-option input[type="radio"] {
            width: auto;
            margin-right: 8px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 10px;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
        }

        .checkbox-option input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        .vehicle-section {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 25px;
        }

        .vehicle-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .vehicle-header h3 {
            color: #495057;
            margin: 0;
        }

        .add-vehicle-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 25px;
        }

        .add-vehicle-btn:hover {
            background: #218838;
        }

        .driver-section {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .driver-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .driver-header h4 {
            color: #856404;
            margin: 0;
        }

        /* Navigation Buttons */
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 15px;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .btn-primary {
            background: linear-gradient(135deg, #1a3a52 0%, #2c5282 100%);
            color: white;
            flex: 1;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 82, 130, 0.3);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .consent-box {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .consent-box label {
            display: flex;
            align-items: flex-start;
        }

        .consent-box input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 3px;
        }

        /* Tooltip for Physical Coverage */
        .info-icon {
            display: inline-block;
            width: 18px;
            height: 18px;
            background: #2c5282;
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 18px;
            font-size: 12px;
            font-weight: bold;
            cursor: help;
            margin-left: 5px;
            position: relative;
        }

        .info-icon:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            white-space: nowrap;
            font-size: 12px;
            font-weight: normal;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .info-icon:hover::before {
            content: '';
            position: absolute;
            bottom: 115%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: #333;
        }

        .unit-box {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .unit-header {
            font-weight: 600;
            color: #495057;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        @media (max-width: 768px) {
            .progress-steps {
                flex-wrap: wrap;
            }

            .progress-step {
                flex-basis: 33.33%;
                margin-bottom: 20px;
            }

            .step-label {
                font-size: 0.75rem;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .form-group.full-width {
                grid-column: span 1;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }

            .form-navigation {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Header Navigation -->
    <header class="header" id="header">
        <nav class="navbar">
            <div class="nav-container">
                <div class="nav-brand">
                    <a href="../index.html">
                        <img src="../images/vanguard-logo.png" alt="Vanguard Insurance Group" class="logo">
                    </a>
                </div>
                <div class="nav-menu" id="navMenu">
                    <ul class="nav-list">
                        <li class="nav-item"><a href="../index.html" class="nav-link">Home</a></li>
                        <li class="nav-item"><a href="commercial.html" class="nav-link">Commercial Insurance</a></li>
                        <li class="nav-item"><a href="../index.html#contact" class="nav-link">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Quote Header -->
    <div class="quote-header">
        <div class="container">
            <h1>Commercial Auto Insurance Quote</h1>
        </div>
    </div>

    <!-- Progress Tracker -->
    <div class="progress-container">
        <div class="progress-steps">
            <div class="progress-bar" id="progressBar"></div>
            <div class="progress-step active" data-step="1">
                <div class="step-circle">1</div>
                <div class="step-label">Business Info</div>
            </div>
            <div class="progress-step" data-step="2">
                <div class="step-circle">2</div>
                <div class="step-label">Fleet & Vehicles</div>
            </div>
            <div class="progress-step" data-step="3">
                <div class="step-circle">3</div>
                <div class="step-label">Drivers</div>
            </div>
            <div class="progress-step" data-step="4">
                <div class="step-circle">4</div>
                <div class="step-label">Coverage</div>
            </div>
            <div class="progress-step" data-step="5">
                <div class="step-circle">5</div>
                <div class="step-label">History</div>
            </div>
            <div class="progress-step" data-step="6">
                <div class="step-circle">6</div>
                <div class="step-label">Quote</div>
            </div>
        </div>
    </div>

    <!-- Form Container -->
    <div class="form-container">
        <form id="commercialAutoForm">
            <!-- Step 1: Business Information -->
            <div class="form-card active" data-step="1">
                <div class="section-title">
                    <i class="fas fa-briefcase"></i>
                    <h2>Business Information</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group full-width">
                        <label for="businessName">Legal Business Name <span class="required">*</span></label>
                        <input type="text" id="businessName" name="businessName" required>
                    </div>

                    <div class="form-group">
                        <label for="dba">DBA (Doing Business As)</label>
                        <input type="text" id="dba" name="dba">
                    </div>

                    <div class="form-group">
                        <label for="businessType">Business Entity Type <span class="required">*</span></label>
                        <select id="businessType" name="businessType" required>
                            <option value="">Select Type</option>
                            <option value="sole-proprietor">Sole Proprietorship</option>
                            <option value="partnership">Partnership</option>
                            <option value="llc">LLC</option>
                            <option value="corporation">Corporation</option>
                            <option value="s-corp">S-Corporation</option>
                            <option value="non-profit">Non-Profit</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="industryType">Industry/Business Type <span class="required">*</span></label>
                        <select id="industryType" name="industryType" required>
                            <option value="">Select Industry</option>
                            <option value="construction">Construction/Contractor</option>
                            <option value="delivery">Delivery Service</option>
                            <option value="transportation">Transportation/Trucking</option>
                            <option value="service">Service Business</option>
                            <option value="retail">Retail</option>
                            <option value="wholesale">Wholesale</option>
                            <option value="manufacturing">Manufacturing</option>
                            <option value="professional">Professional Services</option>
                            <option value="medical">Medical/Healthcare</option>
                            <option value="food">Food Service</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="yearsInBusiness">Years in Business <span class="required">*</span></label>
                        <input type="number" id="yearsInBusiness" name="yearsInBusiness" min="0" required>
                    </div>

                    <div class="form-group">
                        <label for="city">City <span class="required">*</span></label>
                        <input type="text" id="city" name="city" required>
                    </div>

                    <div class="form-group">
                        <label for="state">State <span class="required">*</span></label>
                        <select id="state" name="state" required>
                            <option value="">Select State</option>
                            <option value="OH">Ohio</option>
                            <option value="PA">Pennsylvania</option>
                            <option value="MI">Michigan</option>
                            <option value="IN">Indiana</option>
                            <option value="WV">West Virginia</option>
                            <option value="KY">Kentucky</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="zipCode">ZIP Code <span class="required">*</span></label>
                        <input type="text" id="zipCode" name="zipCode" pattern="[0-9]{5}" required>
                    </div>

                    <div class="form-group">
                        <label for="garageZip">Vehicle Garage ZIP <span class="required">*</span></label>
                        <input type="text" id="garageZip" name="garageZip" pattern="[0-9]{5}" required>
                        <span class="help-text">Where vehicles are primarily parked</span>
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Next: Fleet & Vehicles</button>
                </div>
            </div>

            <!-- Step 2: Fleet & Vehicles -->
            <div class="form-card" data-step="2">
                <div class="section-title">
                    <i class="fas fa-truck"></i>
                    <h2>Fleet & Vehicle Information</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="totalVehicles">Total Number of Vehicles <span class="required">*</span></label>
                        <input type="number" id="totalVehicles" name="totalVehicles" min="0" max="50" required onchange="generateVehicleBoxes()">
                    </div>

                    <div class="form-group">
                        <label for="totalTrailers">Total Number of Trailers <span class="required">*</span></label>
                        <input type="number" id="totalTrailers" name="totalTrailers" min="0" max="50" required onchange="generateTrailerBoxes()">
                    </div>

                    <div class="form-group full-width">
                        <label for="radius">Radius of Operations <span class="required">*</span></label>
                        <select id="radius" name="radius" required>
                            <option value="">Select Radius</option>
                            <option value="local">Local (within 50 miles)</option>
                            <option value="regional">Regional (50-200 miles)</option>
                            <option value="long">Long Distance (200-500 miles)</option>
                            <option value="interstate">Interstate (500+ miles)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Trailer interchange or non-owned trailer? <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="trailerInterchangeYes" name="trailerInterchange" value="yes" required onchange="toggleTrailerInterchangeCoverage(true)">
                                <label for="trailerInterchangeYes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="trailerInterchangeNo" name="trailerInterchange" value="no" required onchange="toggleTrailerInterchangeCoverage(false)">
                                <label for="trailerInterchangeNo">No</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group" id="trailerInterchangeCoverageGroup" style="display: none;">
                        <label for="trailerInterchangeCoverage">Trailer Interchange Coverage <span class="required">*</span></label>
                        <select id="trailerInterchangeCoverage" name="trailerInterchangeCoverage">
                            <option value="">Select Coverage Amount</option>
                            <option value="10000">$10,000</option>
                            <option value="20000">$20,000</option>
                            <option value="30000">$30,000</option>
                            <option value="40000">$40,000</option>
                            <option value="50000">$50,000</option>
                            <option value="60000">$60,000</option>
                            <option value="70000">$70,000</option>
                            <option value="80000">$80,000</option>
                            <option value="90000">$90,000</option>
                            <option value="100000">$100,000</option>
                        </select>
                    </div>
                </div>

                <!-- Vehicles Container -->
                <div id="vehiclesContainer"></div>

                <!-- Trailers Container -->
                <div id="trailersContainer"></div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-secondary" onclick="previousStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Next: Drivers</button>
                </div>
            </div>

            <!-- Step 3: Drivers -->
            <div class="form-card" data-step="3">
                <div class="section-title">
                    <i class="fas fa-users"></i>
                    <h2>Driver Information</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label>Is the owner a driver? <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="ownerDriverYes" name="ownerDriver" value="yes" required onchange="generateDriverBoxes()">
                                <label for="ownerDriverYes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="ownerDriverNo" name="ownerDriver" value="no" required onchange="generateDriverBoxes()">
                                <label for="ownerDriverNo">No</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="totalDrivers">Total number of drivers (including owner) <span class="required">*</span></label>
                        <input type="number" id="totalDrivers" name="totalDrivers" min="1" max="20" required onchange="generateDriverBoxes()">
                    </div>
                </div>

                <!-- Drivers Container -->
                <div id="driversContainer"></div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-secondary" onclick="previousStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Next: Coverage</button>
                </div>
            </div>

            <!-- Step 4: Coverage -->
            <div class="form-card" data-step="4">
                <div class="section-title">
                    <i class="fas fa-shield-alt"></i>
                    <h2>Coverage Requirements</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="liabilityLimit">Liability Limit Needed <span class="required">*</span></label>
                        <select id="liabilityLimit" name="liabilityLimit" required>
                            <option value="">Select Limit</option>
                            <option value="300k">$300,000 CSL</option>
                            <option value="500k">$500,000 CSL</option>
                            <option value="750k">$750,000 CSL</option>
                            <option value="1m">$1,000,000 CSL</option>
                            <option value="2m">$2,000,000 CSL</option>
                            <option value="higher">Higher Limits Needed</option>
                        </select>
                        <span class="help-text">CSL = Combined Single Limit</span>
                    </div>

                    <div class="form-group">
                        <label for="uninsuredLimit">Uninsured Motorist</label>
                        <select id="uninsuredLimit" name="uninsuredLimit">
                            <option value="">Not Needed</option>
                            <option value="300000">$300,000</option>
                            <option value="500000">$500,000</option>
                            <option value="750000">$750,000</option>
                            <option value="1000000">$1,000,000</option>
                            <option value="2000000">$2,000,000</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <h3 style="margin-top: 20px; margin-bottom: 15px;">Additional Coverage Needed</h3>
                    </div>

                    <div class="form-group">
                        <label for="cargoLimit">Cargo Coverage</label>
                        <select id="cargoLimit" name="cargoLimit">
                            <option value="">Not Needed</option>
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                            <option value="25000">$25,000</option>
                            <option value="50000">$50,000</option>
                            <option value="75000">$75,000</option>
                            <option value="100000">$100,000</option>
                            <option value="150000">$150,000</option>
                            <option value="200000">$200,000</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="deductible">Cargo Deductible <span class="required">*</span></label>
                        <select id="deductible" name="deductible" required>
                            <option value="">Select Deductible</option>
                            <option value="500">$500</option>
                            <option value="1000">$1,000</option>
                            <option value="2500">$2,500</option>
                            <option value="5000">$5,000</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="medicalLimit">Medical Payments</label>
                        <select id="medicalLimit" name="medicalLimit">
                            <option value="">Not Needed</option>
                            <option value="1000">$1,000</option>
                            <option value="2000">$2,000</option>
                            <option value="5000">$5,000</option>
                            <option value="10000">$10,000</option>
                            <option value="25000">$25,000</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label>Other Additional Coverage</label>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" id="rental" name="coverages" value="rental">
                                <label for="rental">Rental Reimbursement</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="towing" name="coverages" value="towing">
                                <label for="towing">Towing & Labor</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="hired" name="coverages" value="hired">
                                <label for="hired">Hired & Non-Owned Auto</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-secondary" onclick="previousStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Next: History</button>
                </div>
            </div>

            <!-- Step 5: Insurance History -->
            <div class="form-card" data-step="5">
                <div class="section-title">
                    <i class="fas fa-history"></i>
                    <h2>Insurance & Claims History</h2>
                </div>

                <div class="form-grid">
                    <div class="form-group full-width">
                        <label>Current Commercial Auto Insurance? <span class="required">*</span></label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="insured-yes" name="currentlyInsured" value="yes" required>
                                <label for="insured-yes">Yes</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="insured-no" name="currentlyInsured" value="no" required>
                                <label for="insured-no">No</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group full-width">
                        <label for="claims">Claims in past 5 years? <span class="required">*</span></label>
                        <select id="claims" name="claims" required>
                            <option value="">Select</option>
                            <option value="0">No claims</option>
                            <option value="1">1 claim</option>
                            <option value="2">2 claims</option>
                            <option value="3">3 claims</option>
                            <option value="4+">4 or more claims</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="violations">Moving violations in past 3 years? <span class="required">*</span></label>
                        <select id="violations" name="violations" required>
                            <option value="">Select</option>
                            <option value="0">No violations</option>
                            <option value="1-2">1-2 violations</option>
                            <option value="3-4">3-4 violations</option>
                            <option value="5+">5 or more violations</option>
                        </select>
                    </div>

                    <div class="form-group full-width">
                        <label for="accidents">At-fault accidents in past 5 years? <span class="required">*</span></label>
                        <select id="accidents" name="accidents" required>
                            <option value="">Select</option>
                            <option value="0">No accidents</option>
                            <option value="1">1 accident</option>
                            <option value="2">2 accidents</option>
                            <option value="3+">3 or more accidents</option>
                        </select>
                    </div>
                </div>

                <div class="form-navigation">
                    <button type="button" class="btn btn-secondary" onclick="previousStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Next: Get Quote</button>
                </div>
            </div>

            <!-- Step 6: Quote -->
            <div class="form-card" data-step="6">
                <div class="section-title">
                    <i class="fas fa-calculator"></i>
                    <h2>Your Quote</h2>
                </div>

                <!-- Premium Display -->
                <div style="background: linear-gradient(135deg, #2c5282 0%, #1a365d 100%); color: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; text-align: center;">
                    <h3 style="margin: 0 0 20px 0; font-size: 24px; color: white;">Estimated Annual Premium</h3>
                    <div style="font-size: 48px; font-weight: bold; margin-bottom: 10px;">$12,500</div>
                    <div style="font-size: 20px; opacity: 0.9;">$1,042/month (12 monthly payments)</div>
                    <p style="margin: 20px 0 0 0; font-size: 14px; opacity: 0.8;">*This is an estimated quote. Final pricing may vary based on underwriting review.</p>
                </div>

                <!-- Contact Options -->
                <div style="background: #f7fafc; padding: 25px; border-radius: 8px; margin-bottom: 30px;">
                    <h3 style="margin: 0 0 15px 0; color: #2c5282;">Get Started with Vanguard Insurance</h3>
                    <p style="margin-bottom: 20px; color: #4a5568;">Contact us to finalize your quote and get coverage started:</p>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 25px;">
                        <div style="background: white; padding: 20px; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <div style="font-weight: 600; margin-bottom: 5px; color: #2c5282;">
                                <i class="fas fa-phone"></i> Phone
                            </div>
                            <a href="tel:3304600872" style="color: #2d3748; text-decoration: none; font-size: 18px;">(330) 460-0872</a>
                        </div>
                        <div style="background: white; padding: 20px; border-radius: 8px; border: 2px solid #e2e8f0;">
                            <div style="font-weight: 600; margin-bottom: 5px; color: #2c5282;">
                                <i class="fas fa-envelope"></i> Email
                            </div>
                            <a href="mailto:Contact@vigagency.com" style="color: #2d3748; text-decoration: none; font-size: 16px;">Contact@vigagency.com</a>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <strong>OR</strong>
                    </div>
                </div>

                <!-- Request Contact Option -->
                <div class="form-group full-width">
                    <label style="font-size: 18px; font-weight: 600; margin-bottom: 15px; display: block;">Prefer we contact you?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="contactChoice-reach" name="contactChoice" value="reach-out" onchange="toggleContactForm(false)">
                            <label for="contactChoice-reach">I'll reach out when ready</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="contactChoice-request" name="contactChoice" value="request" onchange="toggleContactForm(true)">
                            <label for="contactChoice-request">Please contact me</label>
                        </div>
                    </div>
                </div>

                <!-- Contact Form (hidden by default) -->
                <div id="contactFormSection" style="display: none; margin-top: 30px; padding-top: 30px; border-top: 2px solid #e2e8f0;">
                    <h3 style="margin-bottom: 20px; color: #2c5282;">Contact Information</h3>

                    <div class="form-grid">
                        <div class="form-group">
                            <label for="contactName">Contact Name <span class="required">*</span></label>
                            <input type="text" id="contactName" name="contactName">
                        </div>

                        <div class="form-group">
                            <label for="contactTitle">Title/Position <span class="required">*</span></label>
                            <input type="text" id="contactTitle" name="contactTitle">
                        </div>

                        <div class="form-group">
                            <label for="email">Email Address <span class="required">*</span></label>
                            <input type="email" id="email" name="email">
                        </div>

                        <div class="form-group">
                            <label for="phone">Phone Number <span class="required">*</span></label>
                            <input type="tel" id="phone" name="phone">
                        </div>

                        <div class="form-group">
                            <label for="bestTime">Best Time to Contact</label>
                            <select id="bestTime" name="bestTime">
                                <option value="">Any Time</option>
                                <option value="morning">Morning (8am-12pm)</option>
                                <option value="afternoon">Afternoon (12pm-5pm)</option>
                                <option value="evening">Evening (5pm-8pm)</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="startDate">Desired Coverage Start Date <span class="required">*</span></label>
                            <input type="date" id="startDate" name="startDate">
                        </div>

                        <div class="form-group full-width">
                            <label for="additionalInfo">Additional Information</label>
                            <textarea id="additionalInfo" name="additionalInfo" rows="4" placeholder="Any special circumstances, cargo details, or questions..."></textarea>
                        </div>
                    </div>

                    <div class="consent-box">
                        <label>
                            <input type="checkbox" id="consentCheckbox" name="consent">
                            <span>I authorize Vanguard Insurance Group to contact me regarding this quote request. I understand that providing false information may void coverage. The information provided is accurate to the best of my knowledge.</span>
                        </label>
                    </div>

                    <div class="form-navigation">
                        <button type="button" class="btn btn-secondary" onclick="previousStep()">Back</button>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Submit Quote Request
                        </button>
                    </div>

                    <p style="margin-top: 20px; color: #666; text-align: center;">
                        Your quote will be prepared within 24 business hours.
                    </p>
                </div>

                <!-- Back button for when contact form is hidden -->
                <div id="backButtonOnly" class="form-navigation">
                    <button type="button" class="btn btn-secondary" onclick="previousStep()">Back</button>
                </div>
            </div>
        </form>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;

        function generateVehicleBoxes() {
            const count = parseInt(document.getElementById('totalVehicles').value) || 0;
            const container = document.getElementById('vehiclesContainer');
            container.innerHTML = '';

            if (count > 0) {
                const header = document.createElement('h3');
                header.style.marginTop = '30px';
                header.style.marginBottom = '20px';
                header.textContent = 'Vehicle Details';
                container.appendChild(header);
            }

            for (let i = 1; i <= count; i++) {
                const box = document.createElement('div');
                box.className = 'unit-box';
                box.innerHTML = `
                    <div class="unit-header">Vehicle ${i}</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="vehicleYear${i}">Year <span class="required">*</span></label>
                            <input type="number" id="vehicleYear${i}" name="vehicleYear${i}" min="1900" max="2025" required>
                        </div>
                        <div class="form-group">
                            <label for="vehicleValue${i}">Value <span class="required">*</span></label>
                            <input type="number" id="vehicleValue${i}" name="vehicleValue${i}" min="0" required>
                        </div>
                        <div class="form-group">
                            <label>
                                Physical Coverage?
                                <span class="info-icon" data-tooltip="Covers damage to your vehicle from collision, theft, vandalism, or weather">?</span>
                            </label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="vehiclePhysical${i}Yes" name="vehiclePhysical${i}" value="yes" required onchange="toggleDeductible('vehicle', ${i}, true)">
                                    <label for="vehiclePhysical${i}Yes">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="vehiclePhysical${i}No" name="vehiclePhysical${i}" value="no" required onchange="toggleDeductible('vehicle', ${i}, false)">
                                    <label for="vehiclePhysical${i}No">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="vehicleDeductible${i}" style="display: none;">
                            <label for="vehicleDeductibleAmount${i}">Deductible <span class="required">*</span></label>
                            <select id="vehicleDeductibleAmount${i}" name="vehicleDeductibleAmount${i}">
                                <option value="">Select</option>
                                <option value="500">$500</option>
                                <option value="1000">$1,000</option>
                                <option value="2500">$2,500</option>
                                <option value="5000">$5,000</option>
                            </select>
                        </div>
                    </div>
                `;
                container.appendChild(box);
            }
        }

        function generateTrailerBoxes() {
            const count = parseInt(document.getElementById('totalTrailers').value) || 0;
            const container = document.getElementById('trailersContainer');
            container.innerHTML = '';

            if (count > 0) {
                const header = document.createElement('h3');
                header.style.marginTop = '30px';
                header.style.marginBottom = '20px';
                header.textContent = 'Trailer Details';
                container.appendChild(header);
            }

            for (let i = 1; i <= count; i++) {
                const box = document.createElement('div');
                box.className = 'unit-box';
                box.innerHTML = `
                    <div class="unit-header">Trailer ${i}</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="trailerYear${i}">Year <span class="required">*</span></label>
                            <input type="number" id="trailerYear${i}" name="trailerYear${i}" min="1900" max="2025" required>
                        </div>
                        <div class="form-group">
                            <label for="trailerValue${i}">Value <span class="required">*</span></label>
                            <input type="number" id="trailerValue${i}" name="trailerValue${i}" min="0" required>
                        </div>
                        <div class="form-group">
                            <label>
                                Physical Coverage?
                                <span class="info-icon" data-tooltip="Covers damage to your trailer from collision, theft, vandalism, or weather">?</span>
                            </label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="trailerPhysical${i}Yes" name="trailerPhysical${i}" value="yes" required onchange="toggleDeductible('trailer', ${i}, true)">
                                    <label for="trailerPhysical${i}Yes">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="trailerPhysical${i}No" name="trailerPhysical${i}" value="no" required onchange="toggleDeductible('trailer', ${i}, false)">
                                    <label for="trailerPhysical${i}No">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="trailerDeductible${i}" style="display: none;">
                            <label for="trailerDeductibleAmount${i}">Deductible <span class="required">*</span></label>
                            <select id="trailerDeductibleAmount${i}" name="trailerDeductibleAmount${i}">
                                <option value="">Select</option>
                                <option value="500">$500</option>
                                <option value="1000">$1,000</option>
                                <option value="2500">$2,500</option>
                                <option value="5000">$5,000</option>
                            </select>
                        </div>
                    </div>
                `;
                container.appendChild(box);
            }
        }

        function toggleDeductible(type, index, show) {
            const deductibleDiv = document.getElementById(`${type}Deductible${index}`);
            const deductibleSelect = document.getElementById(`${type}DeductibleAmount${index}`);

            if (show) {
                deductibleDiv.style.display = 'block';
                deductibleSelect.setAttribute('required', 'required');
            } else {
                deductibleDiv.style.display = 'none';
                deductibleSelect.removeAttribute('required');
                deductibleSelect.value = '';
            }
        }

        function generateDriverBoxes() {
            const count = parseInt(document.getElementById('totalDrivers').value) || 0;
            const container = document.getElementById('driversContainer');
            container.innerHTML = '';

            // Check if owner is a driver
            const ownerIsDriver = document.querySelector('input[name="ownerDriver"]:checked')?.value === 'yes';

            if (count > 0) {
                const header = document.createElement('h3');
                header.style.marginTop = '30px';
                header.style.marginBottom = '20px';
                header.textContent = 'Driver Details';
                container.appendChild(header);
            }

            for (let i = 1; i <= count; i++) {
                const box = document.createElement('div');
                box.className = 'unit-box';

                // Set title - add "- Owner" to Driver 1 if owner is a driver
                const driverTitle = (i === 1 && ownerIsDriver) ? `Driver ${i} - Owner` : `Driver ${i}`;

                box.innerHTML = `
                    <div class="unit-header">${driverTitle}</div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="driverYearOfBirth${i}">Year of Birth <span class="required">*</span></label>
                            <input type="number" id="driverYearOfBirth${i}" name="driverYearOfBirth${i}" min="1940" max="2010" required>
                        </div>
                        <div class="form-group">
                            <label for="driverLicenseState${i}">License State <span class="required">*</span></label>
                            <select id="driverLicenseState${i}" name="driverLicenseState${i}" required>
                                <option value="">Select State</option>
                                <option value="AL">Alabama</option>
                                <option value="AK">Alaska</option>
                                <option value="AZ">Arizona</option>
                                <option value="AR">Arkansas</option>
                                <option value="CA">California</option>
                                <option value="CO">Colorado</option>
                                <option value="CT">Connecticut</option>
                                <option value="DE">Delaware</option>
                                <option value="FL">Florida</option>
                                <option value="GA">Georgia</option>
                                <option value="HI">Hawaii</option>
                                <option value="ID">Idaho</option>
                                <option value="IL">Illinois</option>
                                <option value="IN">Indiana</option>
                                <option value="IA">Iowa</option>
                                <option value="KS">Kansas</option>
                                <option value="KY">Kentucky</option>
                                <option value="LA">Louisiana</option>
                                <option value="ME">Maine</option>
                                <option value="MD">Maryland</option>
                                <option value="MA">Massachusetts</option>
                                <option value="MI">Michigan</option>
                                <option value="MN">Minnesota</option>
                                <option value="MS">Mississippi</option>
                                <option value="MO">Missouri</option>
                                <option value="MT">Montana</option>
                                <option value="NE">Nebraska</option>
                                <option value="NV">Nevada</option>
                                <option value="NH">New Hampshire</option>
                                <option value="NJ">New Jersey</option>
                                <option value="NM">New Mexico</option>
                                <option value="NY">New York</option>
                                <option value="NC">North Carolina</option>
                                <option value="ND">North Dakota</option>
                                <option value="OH">Ohio</option>
                                <option value="OK">Oklahoma</option>
                                <option value="OR">Oregon</option>
                                <option value="PA">Pennsylvania</option>
                                <option value="RI">Rhode Island</option>
                                <option value="SC">South Carolina</option>
                                <option value="SD">South Dakota</option>
                                <option value="TN">Tennessee</option>
                                <option value="TX">Texas</option>
                                <option value="UT">Utah</option>
                                <option value="VT">Vermont</option>
                                <option value="VA">Virginia</option>
                                <option value="WA">Washington</option>
                                <option value="WV">West Virginia</option>
                                <option value="WI">Wisconsin</option>
                                <option value="WY">Wyoming</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>CDL Required? <span class="required">*</span></label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="driverCDL${i}Yes" name="driverCDL${i}" value="yes" required onchange="toggleCDLFields(${i}, true)">
                                    <label for="driverCDL${i}Yes">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="driverCDL${i}No" name="driverCDL${i}" value="no" required onchange="toggleCDLFields(${i}, false)">
                                    <label for="driverCDL${i}No">No</label>
                                </div>
                            </div>
                        </div>
                        <div class="form-group" id="driverCDLYears${i}" style="display: none;">
                            <label for="driverYearCDL${i}">Year CDL was issued <span class="required">*</span></label>
                            <input type="number" id="driverYearCDL${i}" name="driverYearCDL${i}" min="1950" max="2025">
                        </div>
                        <div class="form-group" id="driverExperienceYears${i}" style="display: none;">
                            <label for="driverYearsExperience${i}">Years driving experience <span class="required">*</span></label>
                            <input type="number" id="driverYearsExperience${i}" name="driverYearsExperience${i}" min="0" max="70">
                        </div>
                        <div class="form-group">
                            <label>Any at-fault incidents occurred in the last 3 years? <span class="required">*</span></label>
                            <div class="radio-group">
                                <div class="radio-option">
                                    <input type="radio" id="driverIncidents${i}Yes" name="driverIncidents${i}" value="yes" required>
                                    <label for="driverIncidents${i}Yes">Yes</label>
                                </div>
                                <div class="radio-option">
                                    <input type="radio" id="driverIncidents${i}No" name="driverIncidents${i}" value="no" required>
                                    <label for="driverIncidents${i}No">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                container.appendChild(box);
            }
        }

        function toggleCDLFields(index, hasCDL) {
            const cdlYearsDiv = document.getElementById(`driverCDLYears${index}`);
            const cdlYearsInput = document.getElementById(`driverYearCDL${index}`);
            const experienceYearsDiv = document.getElementById(`driverExperienceYears${index}`);
            const experienceYearsInput = document.getElementById(`driverYearsExperience${index}`);

            if (hasCDL) {
                // Show CDL year field, hide driving experience field
                cdlYearsDiv.style.display = 'block';
                cdlYearsInput.setAttribute('required', 'required');
                experienceYearsDiv.style.display = 'none';
                experienceYearsInput.removeAttribute('required');
                experienceYearsInput.value = '';
            } else {
                // Show driving experience field, hide CDL year field
                experienceYearsDiv.style.display = 'block';
                experienceYearsInput.setAttribute('required', 'required');
                cdlYearsDiv.style.display = 'none';
                cdlYearsInput.removeAttribute('required');
                cdlYearsInput.value = '';
            }
        }

        function toggleTrailerInterchangeCoverage(show) {
            const coverageGroup = document.getElementById('trailerInterchangeCoverageGroup');
            const coverageSelect = document.getElementById('trailerInterchangeCoverage');

            if (show) {
                // Show coverage dropdown and make it required
                coverageGroup.style.display = 'block';
                coverageSelect.setAttribute('required', 'required');
            } else {
                // Hide coverage dropdown and remove required attribute
                coverageGroup.style.display = 'none';
                coverageSelect.removeAttribute('required');
                coverageSelect.value = '';
            }
        }

        function toggleContactForm(show) {
            const contactFormSection = document.getElementById('contactFormSection');
            const backButtonOnly = document.getElementById('backButtonOnly');

            // Get all contact form fields
            const contactName = document.getElementById('contactName');
            const contactTitle = document.getElementById('contactTitle');
            const email = document.getElementById('email');
            const phone = document.getElementById('phone');
            const startDate = document.getElementById('startDate');
            const consentCheckbox = document.getElementById('consentCheckbox');

            if (show) {
                // Show contact form, hide standalone back button
                contactFormSection.style.display = 'block';
                backButtonOnly.style.display = 'none';

                // Make fields required
                if (contactName) contactName.setAttribute('required', 'required');
                if (contactTitle) contactTitle.setAttribute('required', 'required');
                if (email) email.setAttribute('required', 'required');
                if (phone) phone.setAttribute('required', 'required');
                if (startDate) startDate.setAttribute('required', 'required');
                if (consentCheckbox) consentCheckbox.setAttribute('required', 'required');
            } else {
                // Hide contact form, show standalone back button
                contactFormSection.style.display = 'none';
                backButtonOnly.style.display = 'block';

                // Remove required from fields
                if (contactName) contactName.removeAttribute('required');
                if (contactTitle) contactTitle.removeAttribute('required');
                if (email) email.removeAttribute('required');
                if (phone) phone.removeAttribute('required');
                if (startDate) startDate.removeAttribute('required');
                if (consentCheckbox) consentCheckbox.removeAttribute('required');
            }
        }

        function calculatePremium() {
            // BASE RATE: $8000 for baseline scenario
            // Baseline: 1 vehicle ($50k, 2020), 1 trailer ($30k, 2020),
            // 300 mile radius, $1M liability, $1000 deductible, $100k cargo, $5k medical
            let basePremium = 8000;

            // Get form values
            const totalVehicles = parseInt(document.getElementById('totalVehicles')?.value) || 0;
            const totalTrailers = parseInt(document.getElementById('totalTrailers')?.value) || 0;
            const radius = document.getElementById('radius')?.value || '';
            const yearsInBusiness = parseInt(document.getElementById('yearsInBusiness')?.value) || 0;
            const liabilityLimit = document.getElementById('liabilityLimit')?.value || '';
            const cargoLimit = parseInt(document.getElementById('cargoLimit')?.value) || 0;
            const medicalLimit = parseInt(document.getElementById('medicalLimit')?.value) || 0;
            const uninsuredLimit = parseInt(document.getElementById('uninsuredLimit')?.value) || 0;
            const claims = document.getElementById('claims')?.value || '0';
            const violations = document.getElementById('violations')?.value || '0';
            const accidents = document.getElementById('accidents')?.value || '0';
            const totalDrivers = parseInt(document.getElementById('totalDrivers')?.value) || 0;

            if (totalVehicles === 0) return basePremium; // Return base if no data yet

            // VEHICLE COUNT MULTIPLIER (Most significant factor)
            // Each additional vehicle adds 90% of base premium
            let vehicleMultiplier = 0.1 + (totalVehicles * 0.9); // First vehicle counts as 100%

            // TRAILER COUNT (Each trailer adds 30% of a vehicle's impact)
            let trailerMultiplier = totalTrailers * 0.27;

            // RADIUS OF OPERATION (Based on research: longer radius = higher risk)
            let radiusMultiplier = 1.0;
            if (radius === 'local') radiusMultiplier = 0.85; // 50 miles - 15% discount
            else if (radius === 'regional') radiusMultiplier = 0.95; // 50-200 miles - 5% discount
            else if (radius === 'long') radiusMultiplier = 1.0; // 200-500 miles - baseline
            else if (radius === 'interstate') radiusMultiplier = 1.15; // 500+ miles - 15% increase

            // YEARS IN BUSINESS (Experience discount)
            let experienceDiscount = 1.0;
            if (yearsInBusiness >= 10) experienceDiscount = 0.90; // 10% discount
            else if (yearsInBusiness >= 5) experienceDiscount = 0.95; // 5% discount
            else if (yearsInBusiness >= 2) experienceDiscount = 0.98; // 2% discount
            else if (yearsInBusiness < 1) experienceDiscount = 1.20; // 20% increase for new business

            // LIABILITY LIMIT MULTIPLIER
            let liabilityMultiplier = 1.0; // $1M is baseline
            if (liabilityLimit === '300k') liabilityMultiplier = 0.75;
            else if (liabilityLimit === '500k') liabilityMultiplier = 0.85;
            else if (liabilityLimit === '750k') liabilityMultiplier = 0.92;
            else if (liabilityLimit === '1m') liabilityMultiplier = 1.0;
            else if (liabilityLimit === '2m') liabilityMultiplier = 1.25;
            else if (liabilityLimit === 'higher') liabilityMultiplier = 1.50;

            // CARGO COVERAGE ADDER
            let cargoAdder = 0;
            if (cargoLimit > 0) {
                // Baseline $100k cargo costs $800/year, scale from there
                cargoAdder = (cargoLimit / 100000) * 800;
            }

            // MEDICAL PAYMENTS ADDER
            let medicalAdder = 0;
            if (medicalLimit > 0) {
                // Baseline $5k medical costs $150/year, scale from there
                medicalAdder = (medicalLimit / 5000) * 150;
            }

            // UNINSURED MOTORIST ADDER
            let uninsuredAdder = 0;
            if (uninsuredLimit > 0) {
                // Add 8% of liability premium for uninsured motorist
                uninsuredAdder = (basePremium * liabilityMultiplier) * 0.08;
            }

            // CLAIMS HISTORY MULTIPLIER (Major impact)
            let claimsMultiplier = 1.0;
            if (claims === '1') claimsMultiplier = 1.15; // 15% increase
            else if (claims === '2') claimsMultiplier = 1.30; // 30% increase
            else if (claims === '3') claimsMultiplier = 1.50; // 50% increase
            else if (claims === '4+') claimsMultiplier = 1.75; // 75% increase

            // VIOLATIONS MULTIPLIER
            let violationsMultiplier = 1.0;
            if (violations === '1-2') violationsMultiplier = 1.10;
            else if (violations === '3-4') violationsMultiplier = 1.25;
            else if (violations === '5+') violationsMultiplier = 1.40;

            // ACCIDENTS MULTIPLIER
            let accidentsMultiplier = 1.0;
            if (accidents === '1') accidentsMultiplier = 1.20;
            else if (accidents === '2') accidentsMultiplier = 1.40;
            else if (accidents === '3') accidentsMultiplier = 1.65;
            else if (accidents === '4+') accidentsMultiplier = 2.00;

            // DRIVER COUNT IMPACT (Multiple drivers = higher risk)
            let driverMultiplier = 1.0;
            if (totalDrivers > 1) {
                driverMultiplier = 1.0 + ((totalDrivers - 1) * 0.08); // Each additional driver adds 8%
            }

            // CALCULATE VEHICLE VALUE IMPACT
            let vehicleValueMultiplier = 1.0;
            let totalVehicleValue = 0;
            let avgVehicleAge = 0;
            let vehicleCount = 0;

            for (let i = 1; i <= totalVehicles; i++) {
                const year = parseInt(document.getElementById(`vehicleYear${i}`)?.value) || 0;
                const value = parseInt(document.getElementById(`vehicleValue${i}`)?.value) || 0;
                const hasPhysical = document.querySelector(`input[name="vehiclePhysical${i}"]:checked`)?.value;
                const deductible = parseInt(document.getElementById(`vehicleDeductibleAmount${i}`)?.value) || 0;

                if (value > 0) {
                    totalVehicleValue += value;
                    vehicleCount++;
                    if (year > 0) {
                        avgVehicleAge += (2025 - year);
                    }

                    // Lower deductibles = higher premium
                    if (hasPhysical === 'yes' && deductible > 0) {
                        if (deductible === 500) vehicleValueMultiplier += 0.015; // +1.5% per vehicle
                        else if (deductible === 1000) vehicleValueMultiplier += 0.01; // +1% per vehicle (baseline)
                        else if (deductible === 2500) vehicleValueMultiplier -= 0.005; // -0.5% per vehicle
                        else if (deductible === 5000) vehicleValueMultiplier -= 0.01; // -1% per vehicle
                    }
                }
            }

            if (vehicleCount > 0) {
                avgVehicleAge = avgVehicleAge / vehicleCount;
                const avgValue = totalVehicleValue / vehicleCount;

                // Adjust for vehicle value vs baseline ($50k)
                if (avgValue > 50000) {
                    vehicleValueMultiplier += ((avgValue - 50000) / 100000) * 0.15; // 15% increase per $100k above baseline
                } else if (avgValue < 50000) {
                    vehicleValueMultiplier -= ((50000 - avgValue) / 100000) * 0.10; // 10% decrease per $100k below baseline
                }

                // Newer vehicles cost more (vs 5 year old baseline)
                if (avgVehicleAge < 5) {
                    vehicleValueMultiplier += (5 - avgVehicleAge) * 0.02; // 2% per year newer
                } else if (avgVehicleAge > 5) {
                    vehicleValueMultiplier -= (avgVehicleAge - 5) * 0.015; // 1.5% discount per year older
                }
            }

            // FINAL CALCULATION
            let premium = basePremium;
            premium *= vehicleMultiplier; // Apply vehicle count
            premium += (basePremium * trailerMultiplier); // Add trailer impact
            premium *= radiusMultiplier; // Apply radius
            premium *= experienceDiscount; // Apply experience
            premium *= liabilityMultiplier; // Apply liability limit
            premium *= vehicleValueMultiplier; // Apply vehicle value/age/deductible
            premium *= claimsMultiplier; // Apply claims history
            premium *= violationsMultiplier; // Apply violations
            premium *= accidentsMultiplier; // Apply accidents
            premium *= driverMultiplier; // Apply driver count
            premium += cargoAdder; // Add cargo coverage
            premium += medicalAdder; // Add medical payments
            premium += uninsuredAdder; // Add uninsured motorist

            // Round to nearest $100
            premium = Math.round(premium / 100) * 100;

            // Ensure minimum premium
            if (premium < 3000) premium = 3000;

            return premium;
        }

        function updatePremiumDisplay() {
            const annualPremium = calculatePremium();
            const monthlyPremium = Math.round(annualPremium / 12);

            // Update the display
            const annualDisplay = document.querySelector('.form-card[data-step="6"] div[style*="font-size: 48px"]');
            const monthlyDisplay = document.querySelector('.form-card[data-step="6"] div[style*="font-size: 20px"]');

            if (annualDisplay) {
                annualDisplay.textContent = '$' + annualPremium.toLocaleString();
            }
            if (monthlyDisplay) {
                monthlyDisplay.textContent = '$' + monthlyPremium.toLocaleString() + '/month (12 monthly payments)';
            }
        }

        function updateProgress() {
            // Update progress bar
            const progress = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressBar').style.width = progress + '%';

            // Update step indicators
            document.querySelectorAll('.progress-step').forEach((step, index) => {
                const stepNum = index + 1;
                step.classList.remove('active', 'completed');

                if (stepNum < currentStep) {
                    step.classList.add('completed');
                } else if (stepNum === currentStep) {
                    step.classList.add('active');
                }
            });

            // Show current form card
            document.querySelectorAll('.form-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`.form-card[data-step="${currentStep}"]`).classList.add('active');

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function nextStep() {
            // Validate current step
            const currentCard = document.querySelector(`.form-card[data-step="${currentStep}"]`);
            const requiredFields = currentCard.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.checkValidity()) {
                    isValid = false;
                    field.reportValidity();
                }
            });

            if (isValid && currentStep < totalSteps) {
                currentStep++;
                updateProgress();

                // Calculate and display premium when reaching quote step
                if (currentStep === 6) {
                    updatePremiumDisplay();
                }
            }
        }

        function previousStep() {
            if (currentStep > 1) {
                currentStep--;
                updateProgress();
            }
        }

        document.getElementById('commercialAutoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            alert('Thank you for your quote request! A commercial auto insurance specialist will contact you within 24 business hours with your customized quote.');
            // Here you would normally send the form data to your server
        });

        // Initialize
        updateProgress();
    </script>
</body>
</html>
